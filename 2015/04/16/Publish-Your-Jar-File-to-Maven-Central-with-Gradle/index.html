<!doctype html>
<html class="theme-next use-motion theme-next-next">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


  <meta name="google-site-verification" content="VvyjvVXcJQa0QklHipu6pwm2PJGnnchIqX7s5JbbT_0" />



  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.0"/>


    <meta name="description" content="Liao Yifan's blog" />



	<meta name="keywords" content="Maven Central,tutorial," />

  <title> Publish Your Jar File to Maven Central with Gradle // Liao Yifan's Strive </title>
</head>

<body>
  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Liao Yifan's Strive</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br />
          Home
        </a>
      </li>
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br />
          Archives
        </a>
      </li>
    
      
      <li class="menu-item menu-item-categories">
        <a href="/categories">
          <i class="menu-item-icon icon-categories"></i> <br />
          Categories
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          Tags
        </a>
      </li>
    
      
      <li class="menu-item menu-item-about">
        <a href="/about">
          <i class="menu-item-icon icon-about"></i> <br />
          About
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
            
          

          <div id="posts" class="posts-expand">
            
  

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              Publish Your Jar File to Maven Central with Gradle
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            Posted on 2015-04-16
          
        </span>

        
          
            <span class="post-category">
              &nbsp; | &nbsp; In
              
                <a href="/categories/Java/">Java</a>

                
                
                  , 
                

              
                <a href="/categories/Java/Gradle/">Gradle</a>

                
                
                  , 
                

              
                <a href="/categories/Java/Gradle/Maven/">Maven</a>

                
                

              
            </span>
          
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/04/16/Publish-Your-Jar-File-to-Maven-Central-with-Gradle/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/16/Publish-Your-Jar-File-to-Maven-Central-with-Gradle/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          <p>This is a tutorial to help you to publish your jar file to Maven Central with Gradle.</p>
<p><strong>First of all, we need:</strong></p>
<ul>
<li>Sigh up for Sonatype.  </li>
<li>Create a JIRA ticket.</li>
<li>Your own gpg key.</li>
</ul>
<a id="more"></a>
<h2 id="Register_your_project_at_Sonatype">Register your project at Sonatype</h2><p>After sighing up and creating your own account, click the Create button to create a new issue. Choose the options like this:</p>
<ul>
<li>Project: Community Support - Open Source Project Repository Hosting  </li>
<li>Issue Type: New Project </li>
</ul>
<p><strong>NOTICE</strong>: </p>
<ul>
<li>When you create your project, pay more attenton to <strong>groupId</strong>. It is very important.<br><strong>If you don’t own a domain, you can choose a groupId like “com.github.your_account” which reflects your project host.</strong> </li>
<li>You can’t use your JIRA ticket immediately.Sonatype have to prepare repository and normally it takes 1-2 business days.</li>
</ul>
<h2 id="Generate_your_own_gpg_key">Generate your own gpg key</h2><p>Before you publish your <strong>release</strong> version of jar file, you need to sign it with GnuPG.</p>
<h3 id="Check_it_with:">Check it with:</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg <span class="comment">--version</span></span><br></pre></td></tr></table></figure>
<h3 id="Generate_the_key_with:">Generate the key with:</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg <span class="comment">--gen-key</span></span><br></pre></td></tr></table></figure>
<p>You will then be prompted back with the following:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Please <span class="operator"><span class="keyword">select</span> what kind <span class="keyword">of</span> <span class="keyword">key</span> you want:</span><br><span class="line">   (<span class="number">1</span>) RSA <span class="keyword">and</span> RSA (<span class="keyword">default</span>)</span><br><span class="line">   (<span class="number">2</span>) DSA <span class="keyword">and</span> Elgamal</span><br><span class="line">   (<span class="number">3</span>) DSA (<span class="keyword">sign</span> <span class="keyword">only</span>)</span><br><span class="line">   (<span class="number">4</span>) RSA (<span class="keyword">sign</span> <span class="keyword">only</span>)</span><br><span class="line">Your selection?</span></span><br></pre></td></tr></table></figure>
<p>You will want to select number 1, as it can be used for encryption and decryption, whereas the second and third choices are only allowed to sign messages. To do so, press the number 1, and then press enter.<br>You then will be prompted with the following:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RSA <span class="built_in">keys</span> may be between <span class="number">1024</span> <span class="operator">and</span> <span class="number">4096</span> bits <span class="keyword">long</span>.</span><br><span class="line">What keysize <span class="built_in">do</span> you want? (<span class="number">2048</span>)</span><br></pre></td></tr></table></figure>
<p>You will want to enter “2048” here, as recommended by gnupg.<br>You will be prompted with the following:</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Please specify how <span class="built_in">long</span> the <span class="keyword">key</span> should be valid.</span><br><span class="line">         <span class="number">0</span> = <span class="keyword">key</span> does <span class="keyword">not</span> expire</span><br><span class="line">      &lt;n&gt;  = <span class="keyword">key</span> expires <span class="keyword">in</span> n days</span><br><span class="line">      &lt;n&gt;w = <span class="keyword">key</span> expires <span class="keyword">in</span> n weeks</span><br><span class="line">      &lt;n&gt;m = <span class="keyword">key</span> expires <span class="keyword">in</span> n months</span><br><span class="line">      &lt;n&gt;y = <span class="keyword">key</span> expires <span class="keyword">in</span> n years</span><br><span class="line"><span class="keyword">Key</span> <span class="keyword">is</span> valid <span class="keyword">for</span>? (<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>If you don’t want your key to expire (for the next prompt, select 0).<br>Answer yes if the information is correct, when prompted, and then enter your Real Name, Email address, and a comment (which is optional). If everything is correct, press “o” (for Ok) and then enter.<br>After entering your passphrase, follow the instructions in the terminal:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">We need <span class="built_in">to</span> generate <span class="operator">a</span> lot <span class="operator">of</span> <span class="built_in">random</span> <span class="keyword">bytes</span>. It is <span class="operator">a</span> good idea <span class="built_in">to</span> perform</span><br><span class="line">some other action (type <span class="command"><span class="keyword">on</span> <span class="title">the</span> <span class="title">keyboard</span>, <span class="title">move</span> <span class="title">the</span> <span class="title">mouse</span>, <span class="title">utilize</span> <span class="title">the</span></span></span><br><span class="line">disks) during <span class="operator">the</span> prime generation; this gives <span class="operator">the</span> <span class="built_in">random</span> <span class="built_in">number</span></span><br><span class="line">generator <span class="operator">a</span> better chance <span class="built_in">to</span> gain enough entropy.</span><br></pre></td></tr></table></figure>
<p>You can just wait for a while, or you can type random words, move your mouse to give the gpg enough entropy.<br>Your KEY-ID would be the two keys (both identical) above which are in bold. And you can type:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --<span class="keyword">list</span>-<span class="built_in">keys</span></span><br></pre></td></tr></table></figure>
<p>in terminal to list them all.</p>
<h3 id="Upload_your_public_key_to_key_server:">Upload your public key to key server:</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">$</span> <span class="comment">gpg</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">keyserver</span> <span class="comment">hkp://pool</span><span class="string">.</span><span class="comment">sks</span><span class="literal">-</span><span class="comment">keyservers</span><span class="string">.</span><span class="comment">net</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">send</span><span class="literal">-</span><span class="comment">keys</span> &lt;<span class="comment">your_key_ID</span>&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Gradle_Script">Gradle Script</h2><p>I used <a href="https://plus.google.com/+ChrisBanes/posts?partnerid=ogpy0" target="_blank" rel="external">Chris Banes</a>‘s <a href="https://github.com/chrisbanes/gradle-mvn-push" target="_blank" rel="external">gradle-mvn-push</a> and modify it for jar to my <a href="https://github.com/saintdan/gradle_mvn_push_for_jar" target="_blank" rel="external">gradle_mvn_push_for_jar</a>. THX Chris!</p>
<h3 id="Create_project_root_maven-push-gradle">Create project root maven-push.gradle</h3><p>You can download my <a href="https://github.com/saintdan/gradle_mvn_push_for_jar" target="_blank" rel="external">gradle_mvn_push_for_jar</a> or copy following with no modification:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">apply <span class="string">plugin:</span> <span class="string">'java'</span></span><br><span class="line">apply <span class="string">plugin:</span> <span class="string">'idea'</span></span><br><span class="line">apply <span class="string">plugin:</span> <span class="string">'maven'</span></span><br><span class="line">apply <span class="string">plugin:</span> <span class="string">'signing'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> isReleaseBuild() &#123;</span><br><span class="line">    <span class="keyword">return</span> VERSION_NAME.contains(<span class="string">"SNAPSHOT"</span>) == <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> getReleaseRepositoryUrl() &#123;</span><br><span class="line">    <span class="keyword">return</span> hasProperty(<span class="string">'RELEASE_REPOSITORY_URL'</span>) ? RELEASE_REPOSITORY_URL</span><br><span class="line">            : <span class="string">"https://oss.sonatype.org/service/local/staging/deploy/maven2/"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> getSnapshotRepositoryUrl() &#123;</span><br><span class="line">    <span class="keyword">return</span> hasProperty(<span class="string">'SNAPSHOT_REPOSITORY_URL'</span>) ? SNAPSHOT_REPOSITORY_URL</span><br><span class="line">            : <span class="string">"https://oss.sonatype.org/content/repositories/snapshots/"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> getRepositoryUsername() &#123;</span><br><span class="line">    <span class="keyword">return</span> hasProperty(<span class="string">'NEXUS_USERNAME'</span>) ? NEXUS_USERNAME : <span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> getRepositoryPassword() &#123;</span><br><span class="line">    <span class="keyword">return</span> hasProperty(<span class="string">'NEXUS_PASSWORD'</span>) ? NEXUS_PASSWORD : <span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">uploadArchives &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        mavenDeployer &#123;</span><br><span class="line">            beforeDeployment &#123; MavenDeployment deployment -&gt; signing.signPom(deployment) &#125;</span><br><span class="line"></span><br><span class="line">            pom.groupId = GROUP</span><br><span class="line">            pom.artifactId = POM_ARTIFACT_ID</span><br><span class="line">            pom.version = VERSION_NAME</span><br><span class="line"></span><br><span class="line">            repository(<span class="string">url:</span> getReleaseRepositoryUrl()) &#123;</span><br><span class="line">                authentication(<span class="string">userName:</span> getRepositoryUsername(), <span class="string">password:</span> getRepositoryPassword())</span><br><span class="line">            &#125;</span><br><span class="line">            snapshotRepository(<span class="string">url:</span> getSnapshotRepositoryUrl()) &#123;</span><br><span class="line">                authentication(<span class="string">userName:</span> getRepositoryUsername(), <span class="string">password:</span> getRepositoryPassword())</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            pom.project &#123;</span><br><span class="line">                name POM_NAME</span><br><span class="line">                packaging POM_PACKAGING</span><br><span class="line">                description POM_DESCRIPTION</span><br><span class="line">                url POM_URL</span><br><span class="line"></span><br><span class="line">                scm &#123;</span><br><span class="line">                    url POM_SCM_URL</span><br><span class="line">                    connection POM_SCM_CONNECTION</span><br><span class="line">                    developerConnection POM_SCM_DEV_CONNECTION</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                licenses &#123;</span><br><span class="line">                    license &#123;</span><br><span class="line">                        name POM_LICENCE_NAME</span><br><span class="line">                        url POM_LICENCE_URL</span><br><span class="line">                        distribution POM_LICENCE_DIST</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                developers &#123;</span><br><span class="line">                    developer &#123;</span><br><span class="line">                        id POM_DEVELOPER_ID</span><br><span class="line">                        name POM_DEVELOPER_NAME</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task javadocJar(<span class="string">type:</span> Jar, <span class="string">dependsOn:</span> javadoc) &#123;</span><br><span class="line">    classifier = <span class="string">'javadoc'</span></span><br><span class="line">    from <span class="string">'build/docs/javadoc'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task sourcesJar(<span class="string">type:</span> Jar) &#123;</span><br><span class="line">    classifier = <span class="string">'sources'</span></span><br><span class="line">    from sourceSets.main.allSource</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">javadoc&#123;</span><br><span class="line">    failOnError = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">artifacts &#123;</span><br><span class="line">    archives jar</span><br><span class="line">    archives javadocJar</span><br><span class="line">    archives sourcesJar</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">signing &#123;</span><br><span class="line">    sign configurations.archives</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>NOTICE:</strong><br>About javadoc, add</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">javadoc&#123;</span><br><span class="line">    <span class="variable">failOnError =</span> <span class="constant">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>to fix javadoc error.</p>
<h3 id="Create_project_root_gradle-properties">Create project root gradle.properties</h3><p>Copy following, and input your information:</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">VERSION_NAME</span> = &lt;your version name&gt;</span><br><span class="line"><span class="constant">GROUP</span> = &lt;your <span class="keyword">group</span>&gt;</span><br><span class="line"><span class="constant"></span><br><span class="line">POM_DESCRIPTION</span> = &lt;your description&gt;</span><br><span class="line"><span class="constant">POM_URL</span> = &lt;likes https:<span class="comment">//github.com/saintdan/java_util&gt;</span></span><br><span class="line"><span class="constant">POM_SCM_URL</span> = &lt;likes scm:github.com/saintdan/java_util.git&gt;</span><br><span class="line"><span class="constant">POM_SCM_CONNECTION</span> = &lt;likes scm:github.com/saintdan/java_util.git&gt;</span><br><span class="line"><span class="constant">POM_SCM_DEV_CONNECTION</span> = &lt;likes github.com/saintdan/java_util.git&gt;</span><br><span class="line"><span class="constant">POM_LICENCE_NAME</span> = The Apache Software License, Version <span class="number">2.0</span></span><br><span class="line"><span class="constant">POM_LICENCE_URL</span> = http:<span class="comment">//www.apache.org/licenses/LICENSE-2.0.txt</span></span><br><span class="line"><span class="constant">POM_LICENCE_DIST</span> = repo</span><br><span class="line"><span class="constant">POM_DEVELOPER_ID</span> = &lt;your id&gt;</span><br><span class="line"><span class="constant">POM_DEVELOPER_NAME</span> = &lt;your name&gt;</span><br><span class="line"><span class="constant">POM_NAME</span> = &lt;your project name&gt;</span><br><span class="line"><span class="constant">POM_ARTIFACT_ID</span> = &lt;your artifact id&gt;</span><br><span class="line"><span class="constant">POM_PACKAGING</span> = jar</span><br><span class="line"><span class="constant"></span><br><span class="line">SNAPSHOT_REPOSITORY_URL</span>=https:<span class="comment">//oss.sonatype.org/content/repositories/snapshots</span></span><br><span class="line"><span class="constant">RELEASE_REPOSITORY_URL</span>=https:<span class="comment">//oss.sonatype.org/service/local/staging/deploy/maven2</span></span><br></pre></td></tr></table></figure>
<p><strong>NOTICE:</strong><br>VERSION_NAME with -SNAPSHOT suffix means what published is snapshot.  </p>
<h3 id="Modify_project_root_build-gradle">Modify project root build.gradle</h3><p>Add <strong>apply from: ‘maven-push.gradle’</strong> at the end.</p>
<h3 id="Update_your_home_gradle-properties-">Update your home gradle.properties.</h3><p>This will include the username and password to upload to the Maven server and so that they are kept local on your machine. The location defaults to <strong>USER_HOME/.gradle/gradle.properties</strong></p>
<p>It may also include your signing key id, password, and secret key ring file (for signed uploads). Signing is only necessary if you’re putting release builds of your project on maven central.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NEXUS_USERNAME = &lt;your username&gt;</span><br><span class="line">NEXUS_PASSWORD = &lt;your password&gt;</span><br><span class="line"></span><br><span class="line">signing<span class="class">.keyId</span> = &lt;your gpg keyId&gt;</span><br><span class="line">signing<span class="class">.password</span> = &lt;your gpg purchase&gt;</span><br><span class="line">signing<span class="class">.secretKeyRingFile</span> = ~/.gnupg/secring.gpg</span><br></pre></td></tr></table></figure>
<h2 id="Pulish_your_jar_to_Sonatype">Pulish your jar to Sonatype</h2><p>cd to your project root and:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">gradle</span> uploadArchives</span><br></pre></td></tr></table></figure>
<p>Wait for the success notification.<br>Your library will be built, signed and pushed to the sonatype repo. Please make sure that <strong>signing</strong> stage was not skipped. It is skipped if your library name is ending with <strong>“-SNAPSHOT”</strong>, but for releases signing is mandatory.</p>
<h2 id="Offcial_release">Offcial release</h2><p>Open <a href="https://oss.sonatype.org" target="_blank" rel="external">Sonatype Nexus Professional</a> and log in, click the Staging Repositories button to open the list and search your projet.<br>Select it, and press <strong>Close</strong> button. Closing a library actually means that you’re ready to release it. Another option is <strong>Drop</strong> button, which means removing it from the list.<br>If closing went fine, you should see a <strong>Release</strong> button active. Press it and then get back to JIRA and post a comment there that you promoted you library.<br>After that you should get a response from Sonatype that your library will be available in ~10 minutes and it will be synced with the Maven Central in the next few hours.<br><strong>NOTICE:</strong><br>Remeber to comment on the ticket which holds this jar when you promoted your first release.  </p>
<p><strong>Thanks for reading and happy coding.</strong></p>

        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/Maven-Central/">
                #Maven Central
              </a>
            
              <a href="/tags/tutorial/">
                #tutorial
              </a>
            
          </div>
        

        
          <div class="post-nav">
            <div class="post-nav-prev post-nav-item">
              
            </div>

            <div class="post-nav-next post-nav-item">
              
                <a href="/2015/03/30/Set-Up-Development–Environment–On-a-New-Mac/">Set Up Development Environment On a New Mac</a>
              
            </div>
          </div>
        

        
        
      </div>
    
  </div>



  
    <div class="comments" id="comments">
      
        <div id="disqus_thread">
          <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
      
    </div>
  

          </div>

          
        </div>

        
<div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>

<div id="sidebar" class="sidebar">
  <div class="sidebar-inner">

    
      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
          Table Of Contents
        </li>
        <li class="sidebar-nav-overview" data-target="site-overview">
          Overview
        </li>
      </ul>
    

    <div class="site-overview">
      <div class="site-author motion-element">
        <img class="site-author-image" src="/images/default_avatar.jpg" alt="Liao Yifan" />
        <p class="site-author-name">Liao Yifan</p>
      </div>
      <p class="site-description motion-element">Liao Yifan's blog</p>
      <div class="site-state motion-element">
        <div class="site-state-item site-state-posts">
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">posts</span>
        </div>
        <div class="site-state-item site-state-tags">
            <span class="site-state-item-count">3</span>
            <span class="site-state-item-name">tags</span>
        </div>
        <div class="site-state-item site-state-pages">
            <span class="site-state-item-count">3</span>
            <span class="site-state-item-name">pages</span>
        </div>
      </div>

      

      <div class="links-of-author motion-element">
        
          
            <span class="links-of-author-item">
              <a href="https://github.com/saintdan">GitHub</a>
            </span>
          
            <span class="links-of-author-item">
              <a href="https://twitter.com/Saint_Yifan">Twitter</a>
            </span>
          
            <span class="links-of-author-item">
              <a href="http://www.douban.com/people/2142797/">DouBan</a>
            </span>
          
            <span class="links-of-author-item">
              <a href="http://www.zhihu.com/people/liao-yi-fan-68">ZhiHu</a>
            </span>
          
        
      </div>

      
      
        <div class="cc-license motion-element">
          <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
            <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
          </a>
        </div>
      

    </div>

    
      <div class="post-toc-wrap sidebar-panel-active">
        <div class="post-toc-indicator-top post-toc-indicator"></div>
        <div class="post-toc">
          
          
            <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Register_your_project_at_Sonatype"><span class="nav-number">1.</span> <span class="nav-text">Register your project at Sonatype</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Generate_your_own_gpg_key"><span class="nav-number">2.</span> <span class="nav-text">Generate your own gpg key</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Check_it_with:"><span class="nav-number">2.1.</span> <span class="nav-text">Check it with:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Generate_the_key_with:"><span class="nav-number">2.2.</span> <span class="nav-text">Generate the key with:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Upload_your_public_key_to_key_server:"><span class="nav-number">2.3.</span> <span class="nav-text">Upload your public key to key server:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Gradle_Script"><span class="nav-number">3.</span> <span class="nav-text">Gradle Script</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Create_project_root_maven-push-gradle"><span class="nav-number">3.1.</span> <span class="nav-text">Create project root maven-push.gradle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Create_project_root_gradle-properties"><span class="nav-number">3.2.</span> <span class="nav-text">Create project root gradle.properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Modify_project_root_build-gradle"><span class="nav-number">3.3.</span> <span class="nav-text">Modify project root build.gradle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Update_your_home_gradle-properties-"><span class="nav-number">3.4.</span> <span class="nav-text">Update your home gradle.properties.</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pulish_your_jar_to_Sonatype"><span class="nav-number">4.</span> <span class="nav-text">Pulish your jar to Sonatype</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Offcial_release"><span class="nav-number">5.</span> <span class="nav-text">Offcial release</span></a></li></ol></div>
          
        </div>
        <div class="post-toc-indicator-bottom post-toc-indicator"></div>
      </div>
    

  </div>
</div>


      </div>
    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="author">Liao Yifan</span>
</div>




      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $(".fancybox").fancybox();
    });
  </script>

  <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
</script>

  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" id="motion.global">
  $(document).ready(function () {
    var body = $('body');
    var isSidebarVisible = false;
    var sidebarToggle = $('.sidebar-toggle');
    var sidebarToggleLine1st = $('.sidebar-toggle-line-first')
    var sidebarToggleLine2nd = $('.sidebar-toggle-line-middle');
    var sidebarToggleLine3rd = $('.sidebar-toggle-line-last');
    var sidebar = $('.sidebar');

    var SIDEBAR_WIDTH = '320px';
    var SIDEBAR_DISPLAY_DURATION = 300;

    var sidebarToogleLineStatusInit = {width: '100%', opacity: 1, left: 0, rotateZ: 0, top: 0};

    var sidebarToggleLine1stStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine1stStatusArrow = {width: '50%', rotateZ: '-45deg', top: '2px'};
    var sidebarToogleLine1stStatusClose = {width: '100%', rotateZ: '-45deg', top: '5px'};

    var sidebarToggleLine2ndStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine2ndStatusArrow = {width: '90%'};
    var sidebarToogleLine2ndStatusClose = {opacity: 0};

    var sidebarToggleLine3rdStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine3rdStatusArrow = {width: '50%', rotateZ: '45deg', top: '-2px'};
    var sidebarToogleLine3rdStatusClose = {width: '100%', rotateZ: '45deg', top: '-5px'};

    LogoAndMenuMotion();
    sidebatToggleMotion();
    postsListMotion();
    backToTopMotion();


    $(document)
      .on('sidebar.isShowing', function () {
        isDesktop() && body.velocity(
          {paddingRight: SIDEBAR_WIDTH},
          SIDEBAR_DISPLAY_DURATION
        );
        sidebarContentMotion();
      })
      .on('sidebar.isHiding', function () {});

    function LogoAndMenuMotion() {
      $.Velocity.RunSequence([
        { e: $('.brand'), p: { opacity: 1 }, o: { duration: 100 } },
        { e: $('.logo'), p: { opacity: 1, top: 0 }, o: { duration: 50} },
        
        { e: $('.site-title'), p: { opacity: 1, top: 0 }, o: { duration: 200 } }
      ]);
      $('.menu-item').velocity('transition.slideDownIn', {display: null});
    }


    function backToTopMotion () {
      var b2top = $('.back-to-top');
      b2top.on('click', function () {
        body.velocity('scroll');
      });
    }

    function sidebarShowMotion () {

      sidebarToggleLine1st.velocity(sidebarToogleLine1stStatusClose);
      sidebarToggleLine2nd.velocity(sidebarToogleLine2ndStatusClose);
      sidebarToggleLine3rd.velocity(sidebarToogleLine3rdStatusClose);

      sidebar.velocity({width: SIDEBAR_WIDTH}, {
        display: 'block',
        duration: SIDEBAR_DISPLAY_DURATION,
        complete: function () {
          sidebar.addClass('sidebar-active');
          sidebar.trigger('sidebar.didShow');
        }
      });
      sidebar.trigger('sidebar.isShowing');
    }

    function sidebarHideMotion () {
      isDesktop() && body.velocity({paddingRight: 0});
      sidebar.velocity('reverse');

      sidebarToggleLine1st.velocity(sidebarToggleLine1stStatusInit);
      sidebarToggleLine2nd.velocity(sidebarToggleLine2ndStatusInit);
      sidebarToggleLine3rd.velocity(sidebarToggleLine3rdStatusInit);

      sidebar.removeClass('sidebar-active');
      sidebar.trigger('sidebar.isHiding');
    };

    function sidebarContentMotion () {
      $('.sidebar .motion-element').velocity(
        'transition.slideRightIn',
        {stagger: 50, drag: true}
      );
    }

    function postsListMotion () {
      var postMotionOptions = window.postMotionOptions || {stagger: 300, drag: true};
      $('.post').velocity('transition.slideDownIn', postMotionOptions);
    }

    function sidebatToggleMotion () {
      sidebarToggle.on('click', function () {
        isSidebarVisible ? sidebarHideMotion() : sidebarShowMotion();
        isSidebarVisible = !isSidebarVisible;
      });

      sidebarToggle.hover(function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusArrow);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusArrow);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusArrow);
      }, function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusInit);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusInit);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusInit);
      });
    }
  });

</script>





  
  
<script type="text/javascript" id="bootstrap.scrollspy.custom">
  /* ========================================================================
  * Bootstrap: scrollspy.js v3.3.2
  * http://getbootstrap.com/javascript/#scrollspy
  * ========================================================================
  * Copyright 2011-2015 Twitter, Inc.
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  * ======================================================================== */

  /**
   * Custom by iissnan
   *
   * - Add a `clear.bs.scrollspy` event.
   * - Esacpe targets selector.
   */


  +function ($) {
    'use strict';

    // SCROLLSPY CLASS DEFINITION
    // ==========================

    function ScrollSpy(element, options) {
      this.$body          = $(document.body)
      this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)
      this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
      this.selector       = (this.options.target || '') + ' .nav li > a'
      this.offsets        = []
      this.targets        = []
      this.activeTarget   = null
      this.scrollHeight   = 0

      this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))
      this.refresh()
      this.process()
    }

    ScrollSpy.VERSION  = '3.3.2'

    ScrollSpy.DEFAULTS = {
      offset: 10
    }

    ScrollSpy.prototype.getScrollHeight = function () {
      return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }

    ScrollSpy.prototype.refresh = function () {
      var that          = this
      var offsetMethod  = 'offset'
      var offsetBase    = 0

      this.offsets      = []
      this.targets      = []
      this.scrollHeight = this.getScrollHeight()

      if (!$.isWindow(this.$scrollElement[0])) {
        offsetMethod = 'position'
        offsetBase   = this.$scrollElement.scrollTop()
      }

      this.$body
        .find(this.selector)
        .map(function () {
          var $el   = $(this)
          var href  = $el.data('target') || $el.attr('href')
          var $href = /^#./.test(href) && $(escapeSelector(href)) // Need to escape selector.

          return ($href
            && $href.length
            && $href.is(':visible')
            && [[$href[offsetMethod]().top + offsetBase, href]]) || null
        })
        .sort(function (a, b) { return a[0] - b[0] })
        .each(function () {
          that.offsets.push(this[0])
          that.targets.push(this[1])
        })


    }

    ScrollSpy.prototype.process = function () {
      var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
      var scrollHeight = this.getScrollHeight()
      var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()
      var offsets      = this.offsets
      var targets      = this.targets
      var activeTarget = this.activeTarget
      var i

      if (this.scrollHeight != scrollHeight) {
        this.refresh()
      }

      if (scrollTop >= maxScroll) {
        return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)
      }

      if (activeTarget && scrollTop < offsets[0]) {
        $(this.selector).trigger('clear.bs.scrollspy')  // Add a custom event.
        this.activeTarget = null
        return this.clear()
      }

      for (i = offsets.length; i--;) {
        activeTarget != targets[i]
          && scrollTop >= offsets[i]
          && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
          && this.activate(targets[i])
      }
    }

    ScrollSpy.prototype.activate = function (target) {
      this.activeTarget = target

      this.clear()

      var selector = this.selector +
        '[data-target="' + target + '"],' +
        this.selector + '[href="' + target + '"]'

      var active = $(selector)
        .parents('li')
        .addClass('active')

      if (active.parent('.dropdown-menu').length) {
        active = active
          .closest('li.dropdown')
          .addClass('active')
      }

      active.trigger('activate.bs.scrollspy')
    }

    ScrollSpy.prototype.clear = function () {
      $(this.selector)
        .parentsUntil(this.options.target, '.active')
        .removeClass('active')
    }


    // SCROLLSPY PLUGIN DEFINITION
    // ===========================

    function Plugin(option) {
      return this.each(function () {
        var $this   = $(this)
        var data    = $this.data('bs.scrollspy')
        var options = typeof option == 'object' && option

        if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
        if (typeof option == 'string') data[option]()
      })
    }

    var old = $.fn.scrollspy

    $.fn.scrollspy             = Plugin
    $.fn.scrollspy.Constructor = ScrollSpy


    // SCROLLSPY NO CONFLICT
    // =====================

    $.fn.scrollspy.noConflict = function () {
      $.fn.scrollspy = old
      return this
    }


    // SCROLLSPY DATA-API
    // ==================

    $(window).on('load.bs.scrollspy.data-api', function () {
      $('[data-spy="scroll"]').each(function () {
        var $spy = $(this)
        Plugin.call($spy, $spy.data())
      })
    })

  }(jQuery);
</script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0 && isDesktop()) {
        setTimeout(function () {
          $('.sidebar-toggle').trigger('click');
        }, 800);
      }
    });
  </script>




  

  
  

  

    
      
    

    <script type="text/javascript">
      var disqus_shortname = 'liaoyifansstrive';
      var disqus_identifier = '2015/04/16/Publish-Your-Jar-File-to-Maven-Central-with-Gradle/';
      var disqus_url = 'http://saintdan.github.io/2015/04/16/Publish-Your-Jar-File-to-Maven-Central-with-Gradle/';

      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }());
    </script>
  


  
  <script type="text/javascript">
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-61310000-1');ga('send','pageview');
  </script>

</body>
</html>
